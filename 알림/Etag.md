### 2. **버전 기반(Version-based) ETag**

- DB나 캐시에 있는 `updatedAt`(마지막 변경 시각)이나 `version` 값으로 ETag를 만듦
    
- 예시: `lastUpdatedAt=2025-08-25T18:00:00` → `"1692957600000"` 같은 값으로 ETag 설정
    
- 내용 전체를 비교하지 않고도 “최신 변경 시점이 동일하다”는 걸 확인 가능
    
- 대규모 데이터에서 자주 쓰는 방법 (성능 이점 큼)


고민중인것은
### 1. Etag만 Redis에 두는 방식
시나리오 CRUD를 진행하면 이 updatedAt만 즉 Etag만 업데이트해둔다.
클라이언트에서 요청이 들어오면 만약 Etag가 같을 경우는 반환값을 보내지 말고(클라이언트에 있는 값이 최신 상태인거임) 다르다면 다시 DB에 접근해서 결과를 불러온다


### 2. Redis 데이터를 트리거를 통해 실시간으로 업데이트
사용자아이디+사나리오아이디 : 그 데이터를 가지고 hash상태로 저장한다.
사용자가 시나리오 추가/ 수정/ 삭제를 하면 redis를 바로 업데이트한다.
그러고 클라이언트에서 요청이 들어오면 만약 Etag가 같을 경우는 반환값을 똑같이 보내지 말고, 다르다면 db 접근 없이 바로 redis의 데이터를 넘긴다.
ttl은 하루? 로해두나?

그럼 클라이언트에서 알림 목록을 요청하는 경우는(api를 따로 두고있음)
- 처음 화면 진입시(혹시 모르니)
- 시나리오 수정
- 시나리오 삭제
- 시나리오 업데이트

원래 이렇게 트래킹하느게 맞나?
그리고 redis의 업데이트를 저렇게 하면 어떻게 db에 있는 데이터와 일치한다고 볼 수가 있지