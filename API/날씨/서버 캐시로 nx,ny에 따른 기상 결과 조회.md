사용자가 요청을 할때마다 api에 접근ㅎ라는게 맞는건가?  
일ㄷ간 서버 캐시를 사용하면 된다는데 그럼 api로 보내는 nx, ny값는 얼마ㅏ 반경을 가지고 있는걸까?

- 기상청 날씨 API는 **자체 격자 좌표계 (nx, ny)** 를 사용해.  
- 따라서 **위도/경도는 `nx`, `ny`로 변환한 뒤** 요청해야 해.  
- 지역 이름(예: 강남구)으로는 요청할 수 없어.  

- 기상청은 **약 1.1km × 1.1km 격자 단위**로 날씨를 제공함.
    
- 그러므로 **같은 지역 안의 사람들(예: 강남구 A아파트와 B아파트)**은 거의 항상 같은 `nx, ny`에 속함.
    
- 따라서 **캐시 키를 `nx + "," + ny`로 구성해서 재사용**하는 것이 일반적이고 효율적임.

- 위도 경도를 nx, ny로 변경하는 걳은 기상청 기기술문서를 참고하면 될 거 같다.ㄷ

| 위치  | 위도/경도             | 변환된 격자 (`nx`, `ny`) |
| --- | ----------------- | ------------------- |
| 강남역 | 37.4979, 127.0276 | 61, 126             |
| 삼성역 | 37.5087, 127.0632 | 61, 126             |
| 압구정 | 37.5271, 127.0287 | 61, 127             |


## 🧩 전체 처리 흐름 정리

1. 사용자가 앱 실행 → 홈 진입
2. 클라이언트에서 현재 위치 위도/경도 전달
3. 서버에서 위도/경도 → `nx, ny` 변환
4. `nx, ny` 기준으로 캐시 확인
    - 있음 → 캐시된 날씨 응답
    - 없음 → 기상청 API 호출 → 캐시에 저장 후 응답
5. 클라이언트에 필요한 정보만 응답 (기온, 비 여부 등)

### 서버 캐시는 Redis 사용?

```
1. 앱 실행 → 사용자 홈 진입
2. 클라이언트가 현재 위치 (위도, 경도) 서버로 전송
3. 서버가 위도/경도 → nx, ny 변환
4. nx, ny를 키로 해서 Redis에서 날씨 데이터 조회
    └ 캐시 있음 → 바로 응답
    └ ❗ 캐시 없음 → 날씨 API 호출 → 결과를 Redis에 저장(TTL 설정) → 응답

```